{"ast":null,"code":"var _jsxFileName = \"E:\\\\Git\\\\ReactDZ1\\\\React_repos\\\\pagin\\\\src\\\\components\\\\pca\\\\pca.tsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { PaginationControlContainer, PcaWrapper, CardCarWrapper } from './pca.styled';\nimport CardCar from '../CardCar/CardCar';\nimport { PaginationControl } from 'react-bootstrap-pagination-control';\nimport standartCarImg from '../../img/standartcar.jpg';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst getCarImageUrl = async (make = \"\", model = \"\") => {\n  const apiKey = 'dcb856e75162ec68a57c4e5f54f430ca'; // Замените на ваш API ключ\n  const baseUrl = 'https://baza-gai.com.ua';\n  try {\n    // Сначала получаем информацию о модели\n    const modelResponse = await fetch(`${baseUrl}/make/${make}/${model}`, {\n      headers: {\n        'Accept': 'application/json',\n        'X-Api-Key': apiKey\n      }\n    });\n    if (!modelResponse.ok) {\n      throw new Error('Network response was not ok');\n    }\n    const modelData = await modelResponse.json();\n\n    // Проверяем, есть ли фото в данных модели\n    if (modelData.catalog_model && modelData.catalog_model.photo_url) {\n      return modelData.catalog_model.photo_url;\n    }\n\n    // Если фото нет в данных модели, пробуем получить фото из каталога\n    const catalogResponse = await fetch(`${baseUrl}/catalog/${make}/${model}/photos`, {\n      headers: {\n        'Accept': 'application/json',\n        'X-Api-Key': apiKey\n      }\n    });\n    if (!catalogResponse.ok) {\n      throw new Error('Network response was not ok');\n    }\n    const catalogData = await catalogResponse.json();\n    if (catalogData.generations && catalogData.generations.length > 0 && catalogData.generations[0].bodies && catalogData.generations[0].bodies.length > 0 && catalogData.generations[0].bodies[0].photos && catalogData.generations[0].bodies[0].photos.length > 0) {\n      return catalogData.generations[0].bodies[0].photos[0].img_path;\n    }\n    return \"\";\n  } catch (error) {\n    console.error('Error fetching car image:', error);\n    return \"\";\n  }\n};\nconst Pca = ({\n  car,\n  nomer = \"\"\n}) => {\n  _s();\n  const [cars, setCars] = useState([]);\n  const [page, setPage] = useState(1);\n  const [animationClass, setAnimationClass] = useState('slide-in-right');\n  const [imgUrls, setImgUrls] = useState([]);\n  useEffect(() => {\n    if (car != null && typeof car === 'object') {\n      setCars(car.operations);\n    }\n  }, [car]);\n  const itemsPerPage = 1;\n  const totalPages = Math.ceil(cars.length / itemsPerPage);\n  const startIndex = (page - 1) * itemsPerPage;\n  const endIndex = startIndex + itemsPerPage;\n  const currentPageItems = cars.slice(startIndex, endIndex);\n  useEffect(() => {\n    const fetchImages = async () => {\n      const urls = await Promise.all(currentPageItems.map(async item => {\n        if (page === 1) {\n          return (car === null || car === void 0 ? void 0 : car.photo_url) || standartCarImg;\n        } else {\n          const url = await getCarImageUrl(item.vendor, item.model);\n          return url || standartCarImg;\n        }\n      }));\n      setImgUrls(urls);\n    };\n    fetchImages();\n  }, [page, car, currentPageItems]);\n  const changePage = newPage => {\n    const direction = newPage > page ? 'right' : 'left';\n    setAnimationClass(`slide-out-${direction}`);\n    setTimeout(() => {\n      setPage(newPage);\n      setAnimationClass(`slide-in-${direction}`);\n    }, 500);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(PcaWrapper, {\n      children: currentPageItems.map((item, index) => /*#__PURE__*/_jsxDEV(CardCarWrapper, {\n        className: animationClass,\n        onAnimationEnd: () => setAnimationClass(''),\n        children: /*#__PURE__*/_jsxDEV(CardCar, {\n          num: nomer,\n          img: imgUrls[index] || standartCarImg,\n          wanted: false,\n          brand: item.vendor,\n          model: item.model,\n          modelyear: item.model_year,\n          region: item.address,\n          datereg: item.registered_at,\n          color: item.color.ru,\n          fuel: item.fuel.ru\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 13\n        }, this)\n      }, index, false, {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(PaginationControlContainer, {\n      children: /*#__PURE__*/_jsxDEV(PaginationControl, {\n        page: page,\n        between: 4,\n        total: cars.length,\n        limit: itemsPerPage,\n        changePage: changePage,\n        ellipsis: 1\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 141,\n    columnNumber: 5\n  }, this);\n};\n_s(Pca, \"9qNVpJW3nI+maLPGkG2Fhw097os=\");\n_c = Pca;\nexport default Pca;\nvar _c;\n$RefreshReg$(_c, \"Pca\");","map":{"version":3,"names":["React","useEffect","useState","PaginationControlContainer","PcaWrapper","CardCarWrapper","CardCar","PaginationControl","standartCarImg","jsxDEV","_jsxDEV","getCarImageUrl","make","model","apiKey","baseUrl","modelResponse","fetch","headers","ok","Error","modelData","json","catalog_model","photo_url","catalogResponse","catalogData","generations","length","bodies","photos","img_path","error","console","Pca","car","nomer","_s","cars","setCars","page","setPage","animationClass","setAnimationClass","imgUrls","setImgUrls","operations","itemsPerPage","totalPages","Math","ceil","startIndex","endIndex","currentPageItems","slice","fetchImages","urls","Promise","all","map","item","url","vendor","changePage","newPage","direction","setTimeout","children","index","className","onAnimationEnd","num","img","wanted","brand","modelyear","model_year","region","address","datereg","registered_at","color","ru","fuel","fileName","_jsxFileName","lineNumber","columnNumber","between","total","limit","ellipsis","_c","$RefreshReg$"],"sources":["E:/Git/ReactDZ1/React_repos/pagin/src/components/pca/pca.tsx"],"sourcesContent":["import React, { FC, useEffect, useState } from 'react';\nimport { PaginationControlContainer, PcaWrapper, CardCarWrapper } from './pca.styled';\nimport Pagination from 'react-bootstrap/Pagination';\nimport CardCar from '../CardCar/CardCar';\nimport { PaginationControl } from 'react-bootstrap-pagination-control';\nimport standartCarImg from '../../img/standartcar.jpg';\n\ninterface CarOperation {\n  vendor: string;\n  model: string;\n  model_year: number;\n  address: string;\n  registered_at: string;\n  color: {\n    ru: string;\n  };\n  fuel: {\n    ru: string;\n  };\n}\n\ninterface CarProps {\n  car: {\n    comments: string[];\n    digits: string;\n    is_stolen: boolean;\n    model: string;\n    model_year: number;\n    operations: CarOperation[];\n    photo_url: string;\n    region: {\n      name: string;\n      name_ua: string;\n      slug: string;\n      old_code: string;\n      new_code: string;\n    };\n    stolen_details: any;\n    vendor: string;\n    vin: string;\n  } | null | string;\n  nomer?: string; \n}\n\nconst getCarImageUrl = async (make = \"\", model = \"\"): Promise<string> => {\n  const apiKey = 'dcb856e75162ec68a57c4e5f54f430ca'; // Замените на ваш API ключ\n  const baseUrl = 'https://baza-gai.com.ua';\n\n  try {\n    // Сначала получаем информацию о модели\n    const modelResponse = await fetch(`${baseUrl}/make/${make}/${model}`, {\n      headers: {\n        'Accept': 'application/json',\n        'X-Api-Key': apiKey\n      }\n    });\n\n    if (!modelResponse.ok) {\n      throw new Error('Network response was not ok');\n    }\n\n    const modelData = await modelResponse.json();\n\n    // Проверяем, есть ли фото в данных модели\n    if (modelData.catalog_model && modelData.catalog_model.photo_url) {\n      return modelData.catalog_model.photo_url;\n    }\n\n    // Если фото нет в данных модели, пробуем получить фото из каталога\n    const catalogResponse = await fetch(`${baseUrl}/catalog/${make}/${model}/photos`, {\n      headers: {\n        'Accept': 'application/json',\n        'X-Api-Key': apiKey\n      }\n    });\n\n    if (!catalogResponse.ok) {\n      throw new Error('Network response was not ok');\n    }\n\n    const catalogData = await catalogResponse.json();\n\n    if (catalogData.generations && catalogData.generations.length > 0 &&\n        catalogData.generations[0].bodies && catalogData.generations[0].bodies.length > 0 &&\n        catalogData.generations[0].bodies[0].photos && catalogData.generations[0].bodies[0].photos.length > 0) {\n      return catalogData.generations[0].bodies[0].photos[0].img_path;\n    }\n\n    return \"\";\n  } catch (error) {\n    console.error('Error fetching car image:', error);\n    return \"\";\n  }\n}\n\nconst Pca: FC<CarProps> = ({ car, nomer = \"\" }) => {\n  const [cars, setCars] = useState<CarOperation[]>([]);\n  const [page, setPage] = useState(1);\n  const [animationClass, setAnimationClass] = useState('slide-in-right');\n  const [imgUrls, setImgUrls] = useState<string[]>([]);\n\n  useEffect(() => {\n    if (car != null && typeof car === 'object') {\n      setCars(car.operations);\n    }\n  }, [car]);\n\n  const itemsPerPage = 1;\n  const totalPages = Math.ceil(cars.length / itemsPerPage);\n  const startIndex = (page - 1) * itemsPerPage;\n  const endIndex = startIndex + itemsPerPage;\n  const currentPageItems = cars.slice(startIndex, endIndex);\n\n  useEffect(() => {\n    const fetchImages = async () => {\n      const urls = await Promise.all(\n        currentPageItems.map(async (item) => {\n          if (page === 1) {\n            return car?.photo_url || standartCarImg;\n          } else {\n            const url = await getCarImageUrl(item.vendor, item.model);\n            return url || standartCarImg;\n          }\n        })\n      );\n      setImgUrls(urls);\n    };\n    fetchImages();\n  }, [page, car, currentPageItems]);\n\n  const changePage = (newPage: number) => {\n    const direction = newPage > page ? 'right' : 'left';\n    setAnimationClass(`slide-out-${direction}`);\n    setTimeout(() => {\n      setPage(newPage);\n      setAnimationClass(`slide-in-${direction}`);\n    }, 500); \n  };\n\n  return (\n    <div>\n      <PcaWrapper>\n        {currentPageItems.map((item, index) => (\n          <CardCarWrapper\n            key={index}\n            className={animationClass}\n            onAnimationEnd={() => setAnimationClass('')}\n          >\n            <CardCar\n              num={nomer}\n              img={imgUrls[index] || standartCarImg}\n              wanted={false}\n              brand={item.vendor}\n              model={item.model}\n              modelyear={item.model_year}\n              region={item.address}\n              datereg={item.registered_at}\n              color={item.color.ru}\n              fuel={item.fuel.ru}\n            />\n          </CardCarWrapper>\n        ))}\n      </PcaWrapper>\n      <PaginationControlContainer>\n        <PaginationControl\n          page={page}\n          between={4}\n          total={cars.length}\n          limit={itemsPerPage}\n          changePage={changePage}\n          ellipsis={1}\n        />\n      </PaginationControlContainer>\n    </div>\n  );\n};\n\nexport default Pca;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}