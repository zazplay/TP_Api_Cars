{"ast":null,"code":"var _jsxFileName = \"E:\\\\Git\\\\ReactDZ1\\\\React_repos\\\\pagin\\\\src\\\\components\\\\pca\\\\pca.tsx\",\n  _s2 = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { PaginationControlContainer, PcaWrapper, CardCarWrapper } from './pca.styled';\nimport CardCar from '../CardCar/CardCar';\nimport { PaginationControl } from 'react-bootstrap-pagination-control';\nimport standartCarImg from '../../img/standartcar.jpg';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction normalizeString(str) {\n  return str.toLowerCase().replace(/\\s+/g, '-');\n}\nasync function getCarImageUrl(make = \"\", model = \"\") {\n  const apiKey = 'dcb856e75162ec68a57c4e5f54f430ca';\n  const baseUrl = 'https://baza-gai.com.ua';\n  try {\n    const modelResponse = await fetch(`${baseUrl}/make/${make}/${model}`, {\n      headers: {\n        'Accept': 'application/json',\n        'X-Api-Key': apiKey\n      }\n    });\n    if (!modelResponse.ok) {\n      throw new Error('Network response was not ok');\n    }\n    const modelData = await modelResponse.json();\n    if (modelData.catalog_model && modelData.catalog_model.photo_url) {\n      return modelData.catalog_model.photo_url;\n    }\n    const catalogResponse = await fetch(`${baseUrl}/catalog/${make}/${model}/photos`, {\n      headers: {\n        'Accept': 'application/json',\n        'X-Api-Key': apiKey\n      }\n    });\n    if (!catalogResponse.ok) {\n      throw new Error('Network response was not ok');\n    }\n    const catalogData = await catalogResponse.json();\n    if (catalogData.generations && catalogData.generations.length > 0 && catalogData.generations[0].bodies && catalogData.generations[0].bodies.length > 0 && catalogData.generations[0].bodies[0].photos && catalogData.generations[0].bodies[0].photos.length > 0) {\n      return catalogData.generations[0].bodies[0].photos[0].img_path;\n    }\n    return null;\n  } catch (error) {\n    console.error('Error fetching car image:', error);\n    return null;\n  }\n}\nconst Pca = ({\n  car,\n  nomer = \"\"\n}) => {\n  _s2();\n  const cars = [];\n  if (car != null && typeof car === 'object') {\n    var car1image = car.photo_url;\n    var standartCar = standartCarImg;\n    for (let i = 0; i < car.operations.length; i++) {\n      cars.push(car.operations[i]);\n    }\n  }\n  const itemsPerPage = 1;\n  const [page, setPage] = useState(1);\n  const [animationClass, setAnimationClass] = useState('slide-in-right');\n  const totalPages = Math.ceil(cars.length / itemsPerPage);\n  const startIndex = (page - 1) * itemsPerPage;\n  const endIndex = startIndex + itemsPerPage;\n  const currentPageItems = cars.slice(startIndex, endIndex);\n  const changePage = newPage => {\n    const direction = newPage > page ? 'right' : 'left';\n    setAnimationClass(`slide-out-${direction}`);\n    setTimeout(() => {\n      setPage(newPage);\n      setAnimationClass(`slide-in-${direction}`);\n    }, 500);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(PcaWrapper, {\n      children: currentPageItems.map((item, index) => {\n        var _s = $RefreshSig$();\n        const CarItem = () => {\n          _s();\n          const [imageUrl, setImageUrl] = useState(page === 1 ? car1image : standartCar);\n          useEffect(() => {\n            const vendor = item.vendor || '';\n            const model = item.model || '';\n            getCarImageUrl(normalizeString(vendor), normalizeString(model)).then(url => {\n              if (url) setImageUrl(url);\n            }).catch(error => console.error(\"Ошибка при получении URL изображения:\", error));\n          }, [item.vendor, item.model]);\n          return /*#__PURE__*/_jsxDEV(CardCarWrapper, {\n            className: animationClass,\n            onAnimationEnd: () => setAnimationClass(''),\n            children: /*#__PURE__*/_jsxDEV(CardCar, {\n              num: nomer,\n              img: imageUrl,\n              wanted: false,\n              brand: item.vendor,\n              model: item.model,\n              modelyear: item.model_year,\n              region: item.address,\n              datereg: item.registered_at,\n              color: item.color.ru,\n              fuel: item.fuel.ru\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 134,\n              columnNumber: 15\n            }, this)\n          }, index, false, {\n            fileName: _jsxFileName,\n            lineNumber: 129,\n            columnNumber: 13\n          }, this);\n        };\n        _s(CarItem, \"P//rjd7Ro60k9gIUbD4J7BLg7P4=\");\n        return /*#__PURE__*/_jsxDEV(CarItem, {}, index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 16\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(PaginationControlContainer, {\n      children: /*#__PURE__*/_jsxDEV(PaginationControl, {\n        page: page,\n        between: 4,\n        total: cars.length,\n        limit: itemsPerPage,\n        changePage: changePage,\n        ellipsis: 1\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 112,\n    columnNumber: 5\n  }, this);\n};\n_s2(Pca, \"k/yVZSjAdlqSngdUVFf0zH9niF4=\");\n_c = Pca;\nexport default Pca;\nvar _c;\n$RefreshReg$(_c, \"Pca\");","map":{"version":3,"names":["React","useState","useEffect","PaginationControlContainer","PcaWrapper","CardCarWrapper","CardCar","PaginationControl","standartCarImg","jsxDEV","_jsxDEV","normalizeString","str","toLowerCase","replace","getCarImageUrl","make","model","apiKey","baseUrl","modelResponse","fetch","headers","ok","Error","modelData","json","catalog_model","photo_url","catalogResponse","catalogData","generations","length","bodies","photos","img_path","error","console","Pca","car","nomer","_s2","cars","car1image","standartCar","i","operations","push","itemsPerPage","page","setPage","animationClass","setAnimationClass","totalPages","Math","ceil","startIndex","endIndex","currentPageItems","slice","changePage","newPage","direction","setTimeout","children","map","item","index","_s","$RefreshSig$","CarItem","imageUrl","setImageUrl","vendor","then","url","catch","className","onAnimationEnd","num","img","wanted","brand","modelyear","model_year","region","address","datereg","registered_at","color","ru","fuel","fileName","_jsxFileName","lineNumber","columnNumber","between","total","limit","ellipsis","_c","$RefreshReg$"],"sources":["E:/Git/ReactDZ1/React_repos/pagin/src/components/pca/pca.tsx"],"sourcesContent":["import React, { FC, useState, useEffect } from 'react';\nimport { PaginationControlContainer, PcaWrapper, CardCarWrapper } from './pca.styled';\nimport CardCar from '../CardCar/CardCar';\nimport { PaginationControl } from 'react-bootstrap-pagination-control';\nimport standartCarImg from '../../img/standartcar.jpg';\n\ninterface CarProps {\n  car: {\n    comments: string[];\n    digits: string;\n    is_stolen: boolean;\n    model: string;\n    model_year: number;\n    operations: Array<any>;\n    photo_url: string;\n    region: {\n      name: string;\n      name_ua: string;\n      slug: string;\n      old_code: string;\n      new_code: string;\n    };\n    stolen_details: any;\n    vendor: string;\n    vin: string;\n  } | null | string;\n  nomer?: string; \n}\n\nfunction normalizeString(str) {\n  return str.toLowerCase().replace(/\\s+/g, '-');\n}\n\nasync function getCarImageUrl(make = \"\", model = \"\") {\n  const apiKey = 'dcb856e75162ec68a57c4e5f54f430ca';\n  const baseUrl = 'https://baza-gai.com.ua';\n\n  try {\n    const modelResponse = await fetch(`${baseUrl}/make/${make}/${model}`, {\n      headers: {\n        'Accept': 'application/json',\n        'X-Api-Key': apiKey\n      }\n    });\n\n    if (!modelResponse.ok) {\n      throw new Error('Network response was not ok');\n    }\n\n    const modelData = await modelResponse.json();\n\n    if (modelData.catalog_model && modelData.catalog_model.photo_url) {\n      return modelData.catalog_model.photo_url;\n    }\n\n    const catalogResponse = await fetch(`${baseUrl}/catalog/${make}/${model}/photos`, {\n      headers: {\n        'Accept': 'application/json',\n        'X-Api-Key': apiKey\n      }\n    });\n\n    if (!catalogResponse.ok) {\n      throw new Error('Network response was not ok');\n    }\n\n    const catalogData = await catalogResponse.json();\n\n    if (catalogData.generations && catalogData.generations.length > 0 &&\n        catalogData.generations[0].bodies && catalogData.generations[0].bodies.length > 0 &&\n        catalogData.generations[0].bodies[0].photos && catalogData.generations[0].bodies[0].photos.length > 0) {\n      return catalogData.generations[0].bodies[0].photos[0].img_path;\n    }\n\n    return null;\n  } catch (error) {\n    console.error('Error fetching car image:', error);\n    return null;\n  }\n}\n\nconst Pca: FC<CarProps> = ({ car, nomer = \"\" }) => {\n  const cars = [];\n  \n  if (car != null && typeof car === 'object') {\n    var car1image = car.photo_url;\n    var standartCar = standartCarImg;\n    for (let i = 0; i < car.operations.length; i++) {\n      cars.push(car.operations[i]);\n    }\n  }\n\n  const itemsPerPage = 1;\n  const [page, setPage] = useState(1);\n  const [animationClass, setAnimationClass] = useState('slide-in-right');\n\n  const totalPages = Math.ceil(cars.length / itemsPerPage);\n  const startIndex = (page - 1) * itemsPerPage;\n  const endIndex = startIndex + itemsPerPage;\n  const currentPageItems = cars.slice(startIndex, endIndex);\n\n  const changePage = (newPage: number) => {\n    const direction = newPage > page ? 'right' : 'left';\n    setAnimationClass(`slide-out-${direction}`);\n    setTimeout(() => {\n      setPage(newPage);\n      setAnimationClass(`slide-in-${direction}`);\n    }, 500); \n  };\n\n  return (\n    <div>\n      <PcaWrapper>\n      {currentPageItems.map((item, index) => {\n        const CarItem = () => {\n          const [imageUrl, setImageUrl] = useState(page === 1 ? car1image : standartCar);\n\n          useEffect(() => {\n            const vendor = item.vendor || '';\n            const model = item.model || '';\n            getCarImageUrl(normalizeString(vendor), normalizeString(model))\n              .then(url => {\n                if (url) setImageUrl(url);\n              })\n              .catch(error => console.error(\"Ошибка при получении URL изображения:\", error));\n          }, [item.vendor, item.model]);\n\n          return (\n            <CardCarWrapper\n              key={index}\n              className={animationClass}\n              onAnimationEnd={() => setAnimationClass('')}\n            >\n              <CardCar\n                num={nomer}\n                img={imageUrl}\n                wanted={false}\n                brand={item.vendor}\n                model={item.model}\n                modelyear={item.model_year}\n                region={item.address}\n                datereg={item.registered_at}\n                color={item.color.ru}\n                fuel={item.fuel.ru}\n              />\n            </CardCarWrapper>\n          );\n        };\n\n        return <CarItem key={index} />;\n      })}\n      </PcaWrapper>\n      <PaginationControlContainer>\n        <PaginationControl\n          page={page}\n          between={4}\n          total={cars.length}\n          limit={itemsPerPage}\n          changePage={changePage}\n          ellipsis={1}\n        />\n      </PaginationControlContainer>\n    </div>\n  );\n};\n\nexport default Pca;"],"mappings":";;AAAA,OAAOA,KAAK,IAAQC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AACtD,SAASC,0BAA0B,EAAEC,UAAU,EAAEC,cAAc,QAAQ,cAAc;AACrF,OAAOC,OAAO,MAAM,oBAAoB;AACxC,SAASC,iBAAiB,QAAQ,oCAAoC;AACtE,OAAOC,cAAc,MAAM,2BAA2B;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAyBvD,SAASC,eAAeA,CAACC,GAAG,EAAE;EAC5B,OAAOA,GAAG,CAACC,WAAW,CAAC,CAAC,CAACC,OAAO,CAAC,MAAM,EAAE,GAAG,CAAC;AAC/C;AAEA,eAAeC,cAAcA,CAACC,IAAI,GAAG,EAAE,EAAEC,KAAK,GAAG,EAAE,EAAE;EACnD,MAAMC,MAAM,GAAG,kCAAkC;EACjD,MAAMC,OAAO,GAAG,yBAAyB;EAEzC,IAAI;IACF,MAAMC,aAAa,GAAG,MAAMC,KAAK,CAAC,GAAGF,OAAO,SAASH,IAAI,IAAIC,KAAK,EAAE,EAAE;MACpEK,OAAO,EAAE;QACP,QAAQ,EAAE,kBAAkB;QAC5B,WAAW,EAAEJ;MACf;IACF,CAAC,CAAC;IAEF,IAAI,CAACE,aAAa,CAACG,EAAE,EAAE;MACrB,MAAM,IAAIC,KAAK,CAAC,6BAA6B,CAAC;IAChD;IAEA,MAAMC,SAAS,GAAG,MAAML,aAAa,CAACM,IAAI,CAAC,CAAC;IAE5C,IAAID,SAAS,CAACE,aAAa,IAAIF,SAAS,CAACE,aAAa,CAACC,SAAS,EAAE;MAChE,OAAOH,SAAS,CAACE,aAAa,CAACC,SAAS;IAC1C;IAEA,MAAMC,eAAe,GAAG,MAAMR,KAAK,CAAC,GAAGF,OAAO,YAAYH,IAAI,IAAIC,KAAK,SAAS,EAAE;MAChFK,OAAO,EAAE;QACP,QAAQ,EAAE,kBAAkB;QAC5B,WAAW,EAAEJ;MACf;IACF,CAAC,CAAC;IAEF,IAAI,CAACW,eAAe,CAACN,EAAE,EAAE;MACvB,MAAM,IAAIC,KAAK,CAAC,6BAA6B,CAAC;IAChD;IAEA,MAAMM,WAAW,GAAG,MAAMD,eAAe,CAACH,IAAI,CAAC,CAAC;IAEhD,IAAII,WAAW,CAACC,WAAW,IAAID,WAAW,CAACC,WAAW,CAACC,MAAM,GAAG,CAAC,IAC7DF,WAAW,CAACC,WAAW,CAAC,CAAC,CAAC,CAACE,MAAM,IAAIH,WAAW,CAACC,WAAW,CAAC,CAAC,CAAC,CAACE,MAAM,CAACD,MAAM,GAAG,CAAC,IACjFF,WAAW,CAACC,WAAW,CAAC,CAAC,CAAC,CAACE,MAAM,CAAC,CAAC,CAAC,CAACC,MAAM,IAAIJ,WAAW,CAACC,WAAW,CAAC,CAAC,CAAC,CAACE,MAAM,CAAC,CAAC,CAAC,CAACC,MAAM,CAACF,MAAM,GAAG,CAAC,EAAE;MACzG,OAAOF,WAAW,CAACC,WAAW,CAAC,CAAC,CAAC,CAACE,MAAM,CAAC,CAAC,CAAC,CAACC,MAAM,CAAC,CAAC,CAAC,CAACC,QAAQ;IAChE;IAEA,OAAO,IAAI;EACb,CAAC,CAAC,OAAOC,KAAK,EAAE;IACdC,OAAO,CAACD,KAAK,CAAC,2BAA2B,EAAEA,KAAK,CAAC;IACjD,OAAO,IAAI;EACb;AACF;AAEA,MAAME,GAAiB,GAAGA,CAAC;EAAEC,GAAG;EAAEC,KAAK,GAAG;AAAG,CAAC,KAAK;EAAAC,GAAA;EACjD,MAAMC,IAAI,GAAG,EAAE;EAEf,IAAIH,GAAG,IAAI,IAAI,IAAI,OAAOA,GAAG,KAAK,QAAQ,EAAE;IAC1C,IAAII,SAAS,GAAGJ,GAAG,CAACX,SAAS;IAC7B,IAAIgB,WAAW,GAAGpC,cAAc;IAChC,KAAK,IAAIqC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGN,GAAG,CAACO,UAAU,CAACd,MAAM,EAAEa,CAAC,EAAE,EAAE;MAC9CH,IAAI,CAACK,IAAI,CAACR,GAAG,CAACO,UAAU,CAACD,CAAC,CAAC,CAAC;IAC9B;EACF;EAEA,MAAMG,YAAY,GAAG,CAAC;EACtB,MAAM,CAACC,IAAI,EAAEC,OAAO,CAAC,GAAGjD,QAAQ,CAAC,CAAC,CAAC;EACnC,MAAM,CAACkD,cAAc,EAAEC,iBAAiB,CAAC,GAAGnD,QAAQ,CAAC,gBAAgB,CAAC;EAEtE,MAAMoD,UAAU,GAAGC,IAAI,CAACC,IAAI,CAACb,IAAI,CAACV,MAAM,GAAGgB,YAAY,CAAC;EACxD,MAAMQ,UAAU,GAAG,CAACP,IAAI,GAAG,CAAC,IAAID,YAAY;EAC5C,MAAMS,QAAQ,GAAGD,UAAU,GAAGR,YAAY;EAC1C,MAAMU,gBAAgB,GAAGhB,IAAI,CAACiB,KAAK,CAACH,UAAU,EAAEC,QAAQ,CAAC;EAEzD,MAAMG,UAAU,GAAIC,OAAe,IAAK;IACtC,MAAMC,SAAS,GAAGD,OAAO,GAAGZ,IAAI,GAAG,OAAO,GAAG,MAAM;IACnDG,iBAAiB,CAAC,aAAaU,SAAS,EAAE,CAAC;IAC3CC,UAAU,CAAC,MAAM;MACfb,OAAO,CAACW,OAAO,CAAC;MAChBT,iBAAiB,CAAC,YAAYU,SAAS,EAAE,CAAC;IAC5C,CAAC,EAAE,GAAG,CAAC;EACT,CAAC;EAED,oBACEpD,OAAA;IAAAsD,QAAA,gBACEtD,OAAA,CAACN,UAAU;MAAA4D,QAAA,EACVN,gBAAgB,CAACO,GAAG,CAAC,CAACC,IAAI,EAAEC,KAAK,KAAK;QAAA,IAAAC,EAAA,GAAAC,YAAA;QACrC,MAAMC,OAAO,GAAGA,CAAA,KAAM;UAAAF,EAAA;UACpB,MAAM,CAACG,QAAQ,EAAEC,WAAW,CAAC,GAAGvE,QAAQ,CAACgD,IAAI,KAAK,CAAC,GAAGN,SAAS,GAAGC,WAAW,CAAC;UAE9E1C,SAAS,CAAC,MAAM;YACd,MAAMuE,MAAM,GAAGP,IAAI,CAACO,MAAM,IAAI,EAAE;YAChC,MAAMxD,KAAK,GAAGiD,IAAI,CAACjD,KAAK,IAAI,EAAE;YAC9BF,cAAc,CAACJ,eAAe,CAAC8D,MAAM,CAAC,EAAE9D,eAAe,CAACM,KAAK,CAAC,CAAC,CAC5DyD,IAAI,CAACC,GAAG,IAAI;cACX,IAAIA,GAAG,EAAEH,WAAW,CAACG,GAAG,CAAC;YAC3B,CAAC,CAAC,CACDC,KAAK,CAACxC,KAAK,IAAIC,OAAO,CAACD,KAAK,CAAC,uCAAuC,EAAEA,KAAK,CAAC,CAAC;UAClF,CAAC,EAAE,CAAC8B,IAAI,CAACO,MAAM,EAAEP,IAAI,CAACjD,KAAK,CAAC,CAAC;UAE7B,oBACEP,OAAA,CAACL,cAAc;YAEbwE,SAAS,EAAE1B,cAAe;YAC1B2B,cAAc,EAAEA,CAAA,KAAM1B,iBAAiB,CAAC,EAAE,CAAE;YAAAY,QAAA,eAE5CtD,OAAA,CAACJ,OAAO;cACNyE,GAAG,EAAEvC,KAAM;cACXwC,GAAG,EAAET,QAAS;cACdU,MAAM,EAAE,KAAM;cACdC,KAAK,EAAEhB,IAAI,CAACO,MAAO;cACnBxD,KAAK,EAAEiD,IAAI,CAACjD,KAAM;cAClBkE,SAAS,EAAEjB,IAAI,CAACkB,UAAW;cAC3BC,MAAM,EAAEnB,IAAI,CAACoB,OAAQ;cACrBC,OAAO,EAAErB,IAAI,CAACsB,aAAc;cAC5BC,KAAK,EAAEvB,IAAI,CAACuB,KAAK,CAACC,EAAG;cACrBC,IAAI,EAAEzB,IAAI,CAACyB,IAAI,CAACD;YAAG;cAAAE,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACpB;UAAC,GAfG5B,KAAK;YAAAyB,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAgBI,CAAC;QAErB,CAAC;QAAC3B,EAAA,CAjCIE,OAAO;QAmCb,oBAAO5D,OAAA,CAAC4D,OAAO,MAAMH,KAAK;UAAAyB,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAG,CAAC;MAChC,CAAC;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACU,CAAC,eACbrF,OAAA,CAACP,0BAA0B;MAAA6D,QAAA,eACzBtD,OAAA,CAACH,iBAAiB;QAChB0C,IAAI,EAAEA,IAAK;QACX+C,OAAO,EAAE,CAAE;QACXC,KAAK,EAAEvD,IAAI,CAACV,MAAO;QACnBkE,KAAK,EAAElD,YAAa;QACpBY,UAAU,EAAEA,UAAW;QACvBuC,QAAQ,EAAE;MAAE;QAAAP,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACb;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACwB,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAC1B,CAAC;AAEV,CAAC;AAACtD,GAAA,CAnFIH,GAAiB;AAAA8D,EAAA,GAAjB9D,GAAiB;AAqFvB,eAAeA,GAAG;AAAC,IAAA8D,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}